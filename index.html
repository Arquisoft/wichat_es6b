<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>wichat_es6b</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1><span class="image"><img src="./images/arc42-logo.png" alt="arc42"></span> wichat_es6b</h1>
<div class="details">
<span id="revnumber">version 8.2 EN,</span>
<span id="revdate">January 2023</span>
<br><span id="revremark">(based upon AsciiDoc version)</span>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#section-introduction-and-goals">1. Introduction and Goals</a>
<ul class="sectlevel2">
<li><a href="#_requirements_overview">1.1. Requirements Overview</a></li>
<li><a href="#_quality_goals">1.2. Quality Goals</a></li>
<li><a href="#_stakeholders">1.3. Stakeholders</a></li>
</ul>
</li>
<li><a href="#section-architecture-constraints">2. Architecture Constraints</a>
<ul class="sectlevel2">
<li><a href="#_motivation">2.1. Motivation</a></li>
<li><a href="#_technical_constraints">2.2. Technical constraints</a></li>
<li><a href="#_organizational_constraints">2.3. Organizational  constraints</a></li>
<li><a href="#_conventions">2.4. Conventions</a></li>
</ul>
</li>
<li><a href="#section-context-and-scope">3. Context and Scope</a>
<ul class="sectlevel2">
<li><a href="#_business_context">3.1. Business Context</a></li>
<li><a href="#_technical_context">3.2. Technical Context</a></li>
</ul>
</li>
<li><a href="#section-solution-strategy">4. Solution Strategy</a>
<ul class="sectlevel2">
<li><a href="#_technology_decisions">4.1. Technology Decisions</a></li>
<li><a href="#_top_level_descomposition">4.2. Top-Level Descomposition</a></li>
<li><a href="#_approaches_to_achieve_top_quality_goals">4.3. Approaches to Achieve Top Quality Goals</a></li>
<li><a href="#_organizational_decision">4.4. Organizational Decision</a></li>
</ul>
</li>
<li><a href="#section-building-block-view">5. Building Block View</a>
<ul class="sectlevel2">
<li><a href="#_whitebox_overall_system">5.1. Whitebox Overall System</a></li>
<li><a href="#_scope_and_context">5.2. Scope and Context</a></li>
<li><a href="#_level_1_general_system_interaction">5.3. Level 1: General System Interaction</a></li>
<li><a href="#_level_2_internal_components_and_control_flow">5.4. Level 2: Internal Components and Control Flow</a></li>
</ul>
</li>
<li><a href="#section-runtime-view">6. Runtime View</a>
<ul class="sectlevel2">
<li><a href="#_user_registration">6.1. User Registration</a></li>
<li><a href="#_user_login">6.2. User Login</a></li>
<li><a href="#_question_generation">6.3. Question Generation</a></li>
<li><a href="#_answering_a_question">6.4. Answering a Question</a></li>
<li><a href="#_user_profile_view">6.5. User Profile View</a></li>
<li><a href="#_ranking_query">6.6. Ranking Query</a></li>
</ul>
</li>
<li><a href="#section-deployment-view">7. Deployment View</a>
<ul class="sectlevel2">
<li><a href="#_infrastructure_level_1">7.1. Infrastructure Level 1</a></li>
</ul>
</li>
<li><a href="#section-design-decisions">8. Design Concepts and Decisions</a>
<ul class="sectlevel2">
<li><a href="#_architectural_patterns_and_principles">8.1. Architectural Patterns and Principles</a></li>
<li><a href="#_key_architectural_decisions">8.2. Key Architectural Decisions</a></li>
</ul>
</li>
<li><a href="#section-design-decisions">9. Architecture Decisions</a>
<ul class="sectlevel2">
<li><a href="#_architectural_decisions">9.1. Architectural Decisions</a></li>
</ul>
</li>
<li><a href="#section-quality-scenarios">10. Quality Requirements</a></li>
<li><a href="#section-specific-requirements">11. Specific Requirements</a></li>
<li><a href="#section-technical-risks">12. Risks and Technical Debts</a></li>
<li><a href="#section-glossary">13. Glossary</a>
<ul class="sectlevel2">
<li><a href="#_about_the_game">13.1. About the game</a></li>
</ul>
</li>
<li><a href="#section-test-report">14. Test Report</a>
<ul class="sectlevel2">
<li><a href="#_unit_tests">14.1. Unit Tests</a></li>
<li><a href="#_acceptance_tests">14.2. Acceptance Tests</a></li>
<li><a href="#_code_coverage">14.3. Code Coverage</a></li>
<li><a href="#_load_tests">14.4. Load Tests</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<style>
.arc42help {font-size:small; width: 14px; height: 16px; overflow: hidden; position: absolute; right: 0; padding: 2px 0 3px 2px;}
.arc42help::before {content: "?";}
.arc42help:hover {width:auto; height: auto; z-index: 100; padding: 10px;}
.arc42help:hover::before {content: "";}
@media print {
	.arc42help {display:none;}
}
</style>
<div class="paragraph">
<p><strong>About arc42</strong></p>
</div>
<div class="paragraph lead">
<p>arc42, the template for documentation of software and system architecture.</p>
</div>
<div class="paragraph">
<p>Template Version 8.2 EN. (based upon AsciiDoc version), January 2023</p>
</div>
<div class="paragraph">
<p>Created, maintained and &#169; by Dr. Peter Hruschka, Dr. Gernot Starke and contributors.
See <a href="https://arc42.org" class="bare">https://arc42.org</a>.</p>
</div>
<hr>
<div class="sidebarblock arc42help">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This version of the template contains some help and explanations.
It is used for familiarization with arc42 and the understanding of the concepts.
For documentation of your own system you use better the <em>plain</em> version.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-introduction-and-goals">1. Introduction and Goals</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<p>Describes the relevant requirements and the driving forces that software architects and development team must consider.
These include</p>
</div>
<div class="ulist">
<ul>
<li>
<p>underlying business goals,</p>
</li>
<li>
<p>essential features,</p>
</li>
<li>
<p>essential functional requirements,</p>
</li>
<li>
<p>quality goals for the architecture and</p>
</li>
<li>
<p>relevant stakeholders and their expectations</p>
<div class="ulist">
<ul>
<li>
<p>new elements</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>ChattySw has been hired by RTVE to improve an online quiz game inspired by "Saber y Ganar." The previous version was developed by HappySw.</p>
</div>
<div class="paragraph">
<p>The new version, WIChat, lets users identify locations from images and answer related questions. A key feature is the ability to get hints through a conversational AI model.</p>
</div>
<div class="sect2">
<h3 id="_requirements_overview">1.1. Requirements Overview</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Short description of the functional requirements, driving forces, extract (or abstract)
of requirements. Link to (hopefully existing) requirements documents
(with version number and information where to find it).</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>From the point of view of the end users a system is created or modified to
improve support of a business activity and/or improve the quality.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Short textual description, probably in tabular use-case format.
If requirements documents exist this overview should refer to these documents.</p>
</div>
<div class="paragraph">
<p>Keep these excerpts as short as possible. Balance readability of this document with potential redundancy w.r.t to requirements documents.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-1/">Introduction and Goals</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Users must be able to register, log in, and manage their accounts.</p>
</li>
<li>
<p>The system must present images and corresponding quiz questions.</p>
</li>
<li>
<p>Users must be able to submit answers within a set time limit.</p>
</li>
<li>
<p>A conversational AI must provide hints when requested.</p>
</li>
<li>
<p>The system must track user performance and maintain historical data.</p>
</li>
<li>
<p>Questions, answers, and hints must be generated automatically from Wikidata.</p>
</li>
<li>
<p>APIs must be available for accessing user data and quiz content.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_quality_goals">1.2. Quality Goals</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>The top three (max five) quality goals for the architecture whose fulfillment is of highest importance to the major stakeholders.
We really mean quality goals for the architecture. Don&#8217;t confuse them with project goals.
They are not necessarily identical.</p>
</div>
<div class="paragraph">
<p>Consider this overview of potential topics (based upon the ISO 25010 standard):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/01_2_iso-25010-topics-EN.drawio.png" alt="Categories of Quality Requirements">
</div>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should know the quality goals of your most important stakeholders, since they will influence fundamental architectural decisions.
Make sure to be very concrete about these qualities, avoid buzzwords.
If you as an architect do not know how the quality of your work will be judged&#8230;&#8203;</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>A table with quality goals and concrete scenarios, ordered by priorities</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Quality Goal</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Reliability</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensure that the generated questions and hints are accurate and relevant.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Scalability</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Support a growing number of users and interactions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Usability</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provide an intuitive and engaging user experience.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Maintainability</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allow easy updates and improvements to the system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Security</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Protect user data and ensure fair gameplay.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Performance</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It will work the 95% of the time excluding maintenance periods</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_stakeholders">1.3. Stakeholders</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Explicit overview of stakeholders of the system, i.e. all person, roles or organizations that</p>
</div>
<div class="ulist">
<ul>
<li>
<p>should know the architecture</p>
</li>
<li>
<p>have to be convinced of the architecture</p>
</li>
<li>
<p>have to work with the architecture or with code</p>
</li>
<li>
<p>need the documentation of the architecture for their work</p>
</li>
<li>
<p>have to come up with decisions about the system or its development</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should know all parties involved in development of the system or affected by the system.
Otherwise, you may get nasty surprises later in the development process.
These stakeholders determine the extent and the level of detail of your work and its results.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Table with role names, person names, and their expectations with respect to the architecture and its documentation.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 12.5%;">
<col style="width: 25%;">
<col style="width: 62.5%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Expectations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Development Team</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The development team consists of the students that are members of the group.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They should develop a robust application and learn new technologies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>ChattySw</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The company responsible for developing the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They should develop a satisfactory product efficiently and cost-effectively.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>RTVE</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The entity responsible for hiring the application development.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They should obtain the best possible product.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Registered Users</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any person using the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They expect to enjoy a great user experience and learn from the quiz questions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Admin Users</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application would need some administrator to fix any strange behaviour in game.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They expect to fix some minor problems.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>HappySw</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Competitor to ChattySw, developer of the previous version of the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They should compete with ChattySw as the developer of the previous version of the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Rest of competitors</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There is more than one competitor to that type of games.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They compete with ChattySW and WiChat on engaging the target audience of the game.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Hosting suppliers - Azure</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application must be deployed for the public use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They expect a new client of their services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>DNS suppliers</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application must be found in the web by a domain of RTVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">They expect a new client of their services.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong><em>Saber y Ganar</em></strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The physical version of the game would dictate the rules of its online version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It expects to have similar functions as this online game.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-architecture-constraints">2. Architecture Constraints</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Any requirement that constraints software architects in their freedom of design and implementation decisions or decision about the development process. These constraints sometimes go beyond individual systems and are valid for whole organizations and companies.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Architects should know exactly where they are free in their design decisions and where they must adhere to constraints.
Constraints must always be dealt with; they may be negotiable, though.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Simple tables of constraints with explanations.
If needed you can subdivide them into
technical constraints, organizational and political constraints and
conventions (e.g. programming or versioning guidelines, documentation or naming conventions)</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-2/">Architecture Constraints</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_motivation">2.1. Motivation</h3>
<div class="paragraph">
<p>Constraints, like building codes, budgets, or client needs, must always be considered, but some can be adjusted through discussion or smart solutions. Every decision that collide with the constraints decided will be discussed with the team.</p>
</div>
</div>
<div class="sect2">
<h3 id="_technical_constraints">2.2. Technical constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Constraint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Javascript</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The programming language of the project is Javascript, in order to take advantage of some of the frameworks available.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">React</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The use of React.js library for the frontend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The use of Node.js platform for the backend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Express</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A framework used by Node.js in order to make a structure for application witout a huge complexity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MongoDB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The database will be MongoDb, a NoSQL database system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wikidata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">It will be used to generate questions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Github</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All the shares information will be stored at the repo of the project.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM integration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As the system gives hints to the players, a way of comunicating with a LLM (Long Language Model) sush as Gemini or Mistral is needed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gemini</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gemini is the LLM chosen to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In order to deploy all the services and make them accesible online, Docker will be used to ease and automate the deployment process.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIs usage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Some of the services will work as an Application Programming Interface.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time mangement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In order to have a complete experience while using the app, timeouts and timers are needed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_organizational_constraints">2.3. Organizational  constraints</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Constraint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">P2P Review</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Every branch for the development will have two roles, the developer and the reviewer, using one of the features of Github, Pull Requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As the project is held in Github, Github issues are the best way to track all the tasks that need to be done.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Meeting reports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Every time the development team have a meeting to discuss something related with the project.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Self reports</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">By the end of every sprint, each member has to open an issue to write down what they have done over the sprint, as well as the complications they have found while developing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timelines</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As the project has a final deadline, evrything would be finished by May 5th and will not recieve any update after that day.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azure budget cap</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As deployment is a mandatory function of the final result, the team have to deal with the budget cap given by Azure as students.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_conventions">2.4. Conventions</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Constraint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Explanation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use of English</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The documentation will be all written in English as it is the "software-related" language all over the world.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arch42</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The documentation will follow the Arch42 template as a way to split and order all the information related with the software product.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-context-and-scope">3. Context and Scope</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_business_context">3.1. Business Context</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Communication Partner</th>
<th class="tableblock halign-left valign-top">Inputs</th>
<th class="tableblock halign-left valign-top">Outputs</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Client</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username, password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Game score, questions retrieved from Wikidata</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Database</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username, password, score of each game</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Credential validation, score storage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Wikidata</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request for information about the game question</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Generated question with relevant information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Empathy/Gemini</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Game question and correct answer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hints to help the user answer better</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="./images/contextAndScope.png" alt="Diagram Business Context">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_technical_context">3.2. Technical Context</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Technology</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Database</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MongoDB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Communication with Empathy/Gemini</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>User Interface</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">React</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Server</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Node.js</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Virtual Machine</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Azure</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="./images/contextAndScopetecnical.png" alt="Diagram technical Context">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Channels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input/Output</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP/REST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WICHAT &#8594; User API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP/REST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WICHAT &#8594; Question  API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP/REST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WICHAT &#8594; Wikidata</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP/REST</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WICHAT &#8594; llm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">wichat &#8594; Database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Output</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">WICHAT &#8594; Database</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-solution-strategy">4. Solution Strategy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_technology_decisions">4.1. Technology Decisions</h3>
<div class="paragraph">
<p>To develop the application, we have decided to use the following technologies which were the ones provided in the base project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JavaScript: will be the programming language used in the project. We chose it for its widespread popularity, broad browser support, and robust ecosystem(It has a wide variety of tools, libraries, frameworks, and an active community), making it ideal for both frontend and backend development with Node.js.</p>
</li>
<li>
<p>ReactJS: allows us to build user interfaces; its component-based architecture and excellent performance make it ideal for web applications like ours. Furthermore, its seamless integration with JavaScript was a key factor in our decision.</p>
</li>
<li>
<p>Docker: We will use Docker to deploy the web application, as this platform allows us to create containers that package the application and its dependencies, ensuring consistent performance and simplifying deployment across different environments. Additionally, Docker facilitates isolated testing, ensuring that the application runs the same way in each environment (development, testing, production) without external interference.</p>
</li>
<li>
<p>GitHub: is used as a version control and collaboration platform, allowing the team to work efficiently and . Additionally, GitHub Actions provides continuous integration and continuous deployment and organized, as tools from GitHub are used, such as pull requests (to review the code before uploading and avoid conflicts) and issues (to track what each team member is doing or has done).</p>
</li>
<li>
<p>WikiData: will be used as a source of structured data, providing access to large volumes of open data that can be easily integrated into the application.</p>
</li>
<li>
<p>EspressJS: is a minimal and flexible framework for Node.js that simplifies the creation of web applications and APIs. Its simplicity and large ecosystem of middleware(intermediaries between the server and the application,they can perform tasks such as authentication, handling HTTP requests, data validation, logging, among others.) make it ideal for developing the backend of our application.</p>
</li>
<li>
<p>MongoDB was selected as our database due to it&#8217;s scalability and flexibility in handling data. As a non-relational database, it allows for more dynamic and adaptable data storage and retrieval compared to traditional relational databases like MySQL. While MySQL provides structured query language and consistency, MongoDB offers greater flexibility, making it more suitable for our application’s needs, especially when dealing with large volumes of unstructured or semi-structured data, such as the data from WikiData used for questions and answers.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_top_level_descomposition">4.2. Top-Level Descomposition</h3>
<div class="paragraph">
<p>We have chosen to adopt a microservices architecture because we believe it is the best approach for our project. In this design paradigm, the application is segmented into small, autonomous services that typically interact via APIs.Currently, we have the following microservices:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authentication service: It is used for user authentication.</p>
</li>
<li>
<p>Question service: It is used to generate questions from the Wikidata API.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_approaches_to_achieve_top_quality_goals">4.3. Approaches to Achieve Top Quality Goals</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Quality Goal</strong></th>
<th class="tableblock halign-left valign-top"><strong>Decision Made</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We use ReactJS to build an interactive and modern user interface. Additionally, we follow UX/UI design principles to enhance the user experience.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Security</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The application should protect user data and prevent unauthorized access.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Scalability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We use Docker and microservices to enable independent deployment and scalability of each system component. MongoDB facilitates horizontal scalability.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Testability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We apply unit and integration testing. Additionally, we use GitHub Actions for automated testing on each push.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Adaptability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We want our application to reach more people, therefore, we need to make it adaptable to different devices such as mobile phones, laptops, etc., in order to provide the best possible user experience.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Maintainability</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The code should be easy to understand, modify, and extend to facilitate future improvements and allow any new team member to comprehend it without issues. To achieve this, we will implement proper documentation that explains key architectural decisions, the project’s functionality, among other aspects. We will also use GitHub, as version control allows tracking the changes made by each team member. Additionally, we will apply modularization, breaking the code into small, reusable and isolated functions and modules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Performance</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To improve the application&#8217;s performance and avoid system overload, we will use the minimum number of API calls possible to reduce response time.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_organizational_decision">4.4. Organizational Decision</h3>
<div class="ulist">
<ul>
<li>
<p>Language: We have chosen English as the language for this project, which will make it accessible to everyone.</p>
</li>
<li>
<p>GitHub Projects: We will use it to track the team&#8217;s work in general and in a more visual way.</p>
</li>
<li>
<p>Meetings: We will hold them weekly during the lab class, except on special occasions when key decisions for the application need to be made.</p>
</li>
<li>
<p>Tasks: each task assigned to a member must be associated with an issue to track what each member has done or is currently doing</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>A short summary and explanation of the fundamental decisions and solution strategies, that shape system architecture. It includes</p>
</div>
<div class="ulist">
<ul>
<li>
<p>technology decisions</p>
</li>
<li>
<p>decisions about the top-level decomposition of the system, e.g. usage of an architectural pattern or design pattern</p>
</li>
<li>
<p>decisions on how to achieve key quality goals</p>
</li>
<li>
<p>relevant organizational decisions, e.g. selecting a development process or delegating certain tasks to third parties.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>These decisions form the cornerstones for your architecture. They are the foundation for many other detailed decisions or implementation rules.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Keep the explanations of such key decisions short.</p>
</div>
<div class="paragraph">
<p>Motivate what was decided and why it was decided that way,
based upon problem statement, quality goals and key constraints.
Refer to details in the following sections.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-4/">Solution Strategy</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-building-block-view">5. Building Block View</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>The building block view shows the static decomposition of the system into building blocks (modules, components, subsystems, classes, interfaces, packages, libraries, frameworks, layers, partitions, tiers, functions, macros, operations, data structures, &#8230;&#8203;) as well as their dependencies (relationships, associations, &#8230;&#8203;)</p>
</div>
<div class="paragraph">
<p>This view is mandatory for every architecture documentation.
In analogy to a house this is the <em>floor plan</em>.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Maintain an overview of your source code by making its structure understandable through
abstraction.</p>
</div>
<div class="paragraph">
<p>This allows you to communicate with your stakeholder on an abstract level without disclosing implementation details.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>The building block view is a hierarchical collection of black boxes and white boxes
(see figure below) and their descriptions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/05_building_blocks-EN.png" alt="Hierarchy of building blocks">
</div>
</div>
<div class="paragraph">
<p><strong>Level 1</strong> is the white box description of the overall system together with black
box descriptions of all contained building blocks.</p>
</div>
<div class="paragraph">
<p><strong>Level 2</strong> zooms into some building blocks of level 1.
Thus it contains the white box description of selected building blocks of level 1, together with black box descriptions of their internal building blocks.</p>
</div>
<div class="paragraph">
<p><strong>Level 3</strong> zooms into selected building blocks of level 2, and so on.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-5/">Building Block View</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_whitebox_overall_system">5.1. Whitebox Overall System</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<p>Here you describe the decomposition of the overall system using the following white box template. It contains</p>
</div>
<div class="ulist">
<ul>
<li>
<p>an overview diagram</p>
</li>
<li>
<p>a motivation for the decomposition</p>
</li>
<li>
<p>black box descriptions of the contained building blocks. For these we offer you alternatives:</p>
<div class="ulist">
<ul>
<li>
<p>use <em>one</em> table for a short and pragmatic overview of all contained building blocks and their interfaces</p>
</li>
<li>
<p>use a list of black box descriptions of the building blocks according to the black box template (see below).
Depending on your choice of tool this list could be sub-chapters (in text files), sub-pages (in a Wiki) or nested elements (in a modeling tool).</p>
</li>
</ul>
</div>
</li>
<li>
<p>(optional:) important interfaces, that are not explained in the black box templates of a building block, but are very important for understanding the white box.
Since there are so many ways to specify interfaces why do not provide a specific template for them.
 In the worst case you have to specify and describe syntax, semantics, protocols, error handling,
 restrictions, versions, qualities, necessary compatibilities and many things more.
In the best case you will get away with examples or simple signatures.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Motivation</dt>
<dd>
<p>The system consists of a game (Saber y ganar) in which the user interacts with the application to answer questions.</p>
</dd>
<dt class="hdlist1">Contained Building Blocks</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 71.4286%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Name</strong></th>
<th class="tableblock halign-left valign-top"><strong>Responsibility</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Usuario</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interacts with the application via the frontend.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Frontend (React)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the user interface where users interact with the system.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Backend (Node.js)</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manages business logic, handles frontend requests, and communicates with the database.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>MongoDB</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NoSQL database used for storing user, race, and registration data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Docker</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Containerization platform ensuring portability and scalability of services.</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="./images/Building-black-view.png" alt="Vista de despliegue">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scope_and_context">5.2. Scope and Context</h3>
<div class="paragraph">
<p>The system is a question-and-answer game inspired by <strong>Saber y Ganar</strong>. It aims to offer an educational and entertaining user experience by combining modern technologies such as language models and open knowledge sources.</p>
</div>
<div class="paragraph">
<p>The main building blocks of the system are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MongoDB</strong>: Stores all persistent data, including user credentials, gameplay history, scores, and response times.</p>
</li>
<li>
<p><strong>LLM (Large Language Model)</strong>: Generates contextual hints to assist the user in answering questions. It enhances the game experience through natural language processing.</p>
</li>
<li>
<p><strong>Wikidata</strong>: Serves as the main external data source for questions and answers. It provides structured, reliable, and up-to-date content for the game.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_level_1_general_system_interaction">5.3. Level 1: General System Interaction</h3>
<div class="paragraph">
<p>At this level, we explore how the main components interact within the system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>user</strong> interacts with the <strong>frontend</strong>, which serves as the visual interface of the game.</p>
</li>
<li>
<p>The <strong>frontend</strong> communicates with the <strong>LLM</strong> to request and display hints during the game.</p>
</li>
<li>
<p>The <strong>backend</strong> handles both:</p>
</li>
<li>
<p>The <strong>user data</strong>, by interacting with the database (MongoDB).</p>
</li>
<li>
<p>The <strong>game content</strong>, by fetching questions and answers from <strong>Wikidata</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In summary:
1. The user accesses the game through the frontend.
2. The frontend sends requests to the backend, which acts as the system&#8217;s coordinator.
3. The backend fetches questions from Wikidata and manages user data in MongoDB.
4. Hints are generated by the LLM and delivered to the frontend via a dedicated interaction.</p>
</div>
</div>
<div class="sect2">
<h3 id="_level_2_internal_components_and_control_flow">5.4. Level 2: Internal Components and Control Flow</h3>
<div class="paragraph">
<p>This level provides a more detailed view of the internal architecture and the flow of data between components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>User</strong> interacts with a central <strong>Gateway</strong>, which acts as the main controller for the entire system.
All communication flows through the Gateway, ensuring centralized routing and access control.</p>
</li>
<li>
<p>The <strong>Frontend</strong> contains a key module called <strong>Game</strong>, responsible for:</p>
<div class="ulist">
<ul>
<li>
<p>Displaying questions and collecting user responses.</p>
</li>
<li>
<p>Requesting contextual hints from the LLM.</p>
</li>
<li>
<p>Communicating exclusively with the Gateway.</p>
</li>
</ul>
</div>
</li>
<li>
<p>The <strong>Backend</strong> is composed of several core modules, grouped under the <strong>User Module</strong>, which is responsible for managing all user-related operations:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Authentication Service</strong>
Verifies user credentials and ensures secure login.</p>
</li>
<li>
<p><strong>Authorization Service</strong>
Controls user permissions and enforces role-based access.</p>
</li>
<li>
<p><strong>History Service</strong>
Records gameplay activity, including results, answer accuracy, and response times.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>External Services</strong> integrated into the system:</p>
<div class="ulist">
<ul>
<li>
<p><strong>LLM API</strong> – The Game module (via the Gateway) interacts with the LLM to retrieve intelligent hints.</p>
</li>
<li>
<p><strong>Wikidata API</strong> – The Backend accesses Wikidata to dynamically retrieve question-and-answer content used in the game.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-runtime-view">6. Runtime View</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>The runtime view describes concrete behavior and interactions of the system’s building blocks in form of scenarios from the following areas:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>important use cases or features: how do building blocks execute them?</p>
</li>
<li>
<p>interactions at critical external interfaces: how do building blocks cooperate with users and neighboring systems?</p>
</li>
<li>
<p>operation and administration: launch, start-up, stop</p>
</li>
<li>
<p>error and exception scenarios</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remark: The main criterion for the choice of possible scenarios (sequences, workflows) is their <strong>architectural relevance</strong>. It is <strong>not</strong> important to describe a large number of scenarios. You should rather document a representative selection.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should understand how (instances of) building blocks of your system perform their job and communicate at runtime.
You will mainly capture scenarios in your documentation to communicate your architecture to stakeholders that are less willing or able to read and understand the static models (building block view, deployment view).</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>There are many notations for describing scenarios, e.g.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>numbered list of steps (in natural language)</p>
</li>
<li>
<p>activity diagrams or flow charts</p>
</li>
<li>
<p>sequence diagrams</p>
</li>
<li>
<p>BPMN or EPCs (event process chains)</p>
</li>
<li>
<p>state machines</p>
</li>
<li>
<p>&#8230;&#8203;</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-6/">Runtime View</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_registration">6.1. User Registration</h3>
<div class="imageblock">
<div class="content">
<img src="./images/registration.png" alt="registration" width="708" height="669">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_login">6.2. User Login</h3>
<div class="imageblock">
<div class="content">
<img src="./images/login.png" alt="login" width="529" height="596">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_question_generation">6.3. Question Generation</h3>
<div class="imageblock">
<div class="content">
<img src="./images/question_generation.png" alt="question generation" width="983" height="529">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_answering_a_question">6.4. Answering a Question</h3>
<div class="imageblock">
<div class="content">
<img src="./images/question_response.png" alt="question response" width="1750" height="1317">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_profile_view">6.5. User Profile View</h3>
<div class="imageblock">
<div class="content">
<img src="./images/profile.png" alt="profile" width="784" height="426">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_ranking_query">6.6. Ranking Query</h3>
<div class="imageblock">
<div class="content">
<img src="./images/ranking.png" alt="ranking" width="785" height="426">
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-deployment-view">7. Deployment View</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>The deployment view describes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>technical infrastructure used to execute your system, with infrastructure elements like geographical locations, environments, computers, processors, channels and net topologies as well as other infrastructure elements and</p>
</li>
<li>
<p>mapping of (software) building blocks to that infrastructure elements.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Often systems are executed in different environments, e.g. development environment, test environment, production environment. In such cases you should document all relevant environments.</p>
</div>
<div class="paragraph">
<p>Especially document a deployment view if your software is executed as distributed system with more than one computer, processor, server or container or when you design and construct your own hardware processors and chips.</p>
</div>
<div class="paragraph">
<p>From a software perspective it is sufficient to capture only those elements of an infrastructure that are needed to show a deployment of your building blocks. Hardware architects can go beyond that and describe an infrastructure to any level of detail they need to capture.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Software does not run without hardware.
This underlying infrastructure can and will influence a system and/or some
cross-cutting concepts. Therefore, there is a need to know the infrastructure.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Maybe a highest level deployment diagram is already contained in section 3.2. as
technical context with your own infrastructure as ONE black box. In this section one can
zoom into this black box using additional deployment diagrams:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>UML offers deployment diagrams to express that view. Use it, probably with nested diagrams,
when your infrastructure is more complex.</p>
</li>
<li>
<p>When your (hardware) stakeholders prefer other kinds of diagrams rather than a deployment diagram, let them use any kind that is able to show nodes and channels of the infrastructure.</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-7/">Deployment View</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_infrastructure_level_1">7.1. Infrastructure Level 1</h3>
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<p>Describe (usually in a combination of diagrams, tables, and text):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>distribution of a system to multiple locations, environments, computers, processors, .., as well as physical connections between them</p>
</li>
<li>
<p>important justifications or motivations for this deployment structure</p>
</li>
<li>
<p>quality and/or performance features of this infrastructure</p>
</li>
<li>
<p>mapping of software artifacts to elements of this infrastructure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For multiple environments or alternative deployments please copy and adapt this section of arc42 for all relevant environments.</p>
</div>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/07-deploymentDiagramv3.png" alt="Vista de despliegue">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Motivation</dt>
<dd>
<p>Having independent services deployed on the same machine give a lot of flexibility at deciding where the application will be deployed, making possible to have only a virtual machine to run the whole application.</p>
</dd>
<dt class="hdlist1">Quality and/or Performance Features</dt>
<dd>
<p>By our experience, we estimate that Azure VM with 2 GiB RAM and 1vCPU could work perfectly.</p>
</dd>
<dt class="hdlist1">Mapping of Building Blocks to Infrastructure</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The client will always be a web browser such as Safari or Firefox, by a HTTP request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WebApp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This is the frontend of the application. THe function of the game does not need to store information, everything is dynamic, so there is no need is having the game in an independent service.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gateway</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The gateway service recieves all the request from any service and handle where to give the request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Questions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This service connects with de Wikidata API, and requests some types of questions known by our application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wikidata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service where questions are collected. SparQL is required to use the API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The LLM decided to support hint requests are Mistral and Gemini. The idea is to give a prompt with the context of how to answer client questions with hints.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Every interaction between services is done by HTTP requests, and they have defined their own ports on the same machine:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Element</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Webapp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gateway Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8001</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Auth Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8002</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8003</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">History Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8004</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Questions Service</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8010</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WebApp</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Grafana</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9091</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prometheus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9090</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-design-decisions">8. Design Concepts and Decisions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_architectural_patterns_and_principles">8.1. Architectural Patterns and Principles</h3>
<div class="paragraph">
<p>The system follows a modular layered architecture, promoting separation of concerns and scalability:</p>
</div>
<div class="paragraph">
<p>Service Layering:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Modular Components: Each functional area of the system is handled by a separate module responsible for its own domain logic.</p>
</li>
<li>
<p>API Gateway: All client requests pass through a centralized API Gateway, which acts as the single entry point to the backend. It handles routing, request validation, and response formatting, ensuring secure and consistent communication between the frontend and backend modules.</p>
</li>
<li>
<p>Frontend Integration: The user interface communicates exclusively with the API Gateway, which abstracts the internal structure of the backend and simplifies frontend development.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This approach improves maintainability and supports parallel development,  while ensuring consistency through a shared database and centralized logic.</p>
</div>
</div>
<div class="sect2">
<h3 id="_key_architectural_decisions">8.2. Key Architectural Decisions</h3>
<div class="paragraph">
<p>Starting from Scratch with Reference to Previous Projects:
The decision was made to develop the system from scratch, leveraging the knowledge and experiences from last year&#8217;s projects. This allowed for the design of a more efficient and flexible architecture without the constraints of previous versions.</p>
</div>
<div class="paragraph">
<p>Use of Modern Technologies:
Technologies such as React for the interface, Node.js for the backend, and MongoDB as the database have been chosen, ensuring an agile development process adaptable to the project&#8217;s needs.</p>
</div>
<div class="paragraph">
<p>Deployment in the Cloud:
The application is deployed using Microsoft Azure, taking advantage of its scalability, reliability, and integrated services for monitoring and continuous deployment.</p>
</div>
<div class="paragraph">
<p>Integration of LLM (Large Language Model):
Gemini, a powerful language model, is integrated into the system to provide advanced language processing capabilities, enhancing features such as intelligent search, summarization, or natural language interaction depending on the project requirements.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-design-decisions">9. Architecture Decisions</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>Important, expensive, large scale or risky architecture decisions including rationales.
With "decisions" we mean selecting one alternative based on given criteria.</p>
</div>
<div class="paragraph">
<p>Please use your judgement to decide whether an architectural decision should be documented
here in this central section or whether you better document it locally
(e.g. within the white box template of one building block).</p>
</div>
<div class="paragraph">
<p>Avoid redundancy.
Refer to section 4, where you already captured the most important decisions of your architecture.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Stakeholders of your system should be able to comprehend and retrace your decisions.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>Various options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ADR (<a href="https://cognitect.com/blog/2011/11/15/documenting-architecture-decisions">Documenting Architecture Decisions</a>) for every important decision</p>
</li>
<li>
<p>List or table, ordered by importance and consequences or:</p>
</li>
<li>
<p>more detailed in form of separate sections per decision</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-9/">Architecture Decisions</a> in the arc42 documentation.
There you will find links and examples about ADR.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>The architectural decisions are fully documented in our <a href="https://github.com/Arquisoft/wichat_es6b/wiki">repository Wiki Section</a>. To avoid redundancy, instead of writing the decisions here in the documentation, we will refer o them.</p>
</div>
<div class="sect2">
<h3 id="_architectural_decisions">9.1. <a href="https://github.com/Arquisoft/wichat_es6b/wiki/Architectural-Decisions">Architectural Decisions</a></h3>
<div class="sect3">
<h4 id="_organizational_decisions">9.1.1. Organizational Decisions</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6b/wiki/Architectural-Decisions#architectural-decision-00---documentation-language">Language</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_technology_decisions_2">9.1.2. Technology Decisions</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6b/wiki/Architectural-Decisions#architectural-decision-01---programming-language">Programming Language</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6b/wiki/Architectural-Decisions#architectural-decision-03---deployment">Deployment</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6b/wiki/Architectural-Decisions#architectural-decision-04---database">DataBase</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6b/wiki/Architectural-Decisions#architectural-decision-05---user-interface">User Interface</a></p>
</li>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6b/wiki/Architectural-Decisions#architectural-decision-06---backend">Backend</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_top_level_descomposition_2">9.1.3. Top-Level Descomposition</h4>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/Arquisoft/wichat_es6b/wiki/Architectural-Decisions#architectural-decision-02---architecure">Architecture</a></p>
</li>
</ul>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-quality-scenarios">10. Quality Requirements</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Content</div>
<p>This section contains all quality requirements as quality tree with scenarios. The most important ones have already been described in section 1.2. (quality goals)</p>
</div>
<div class="paragraph">
<p>Here you can also capture quality requirements with lesser priority,
which will not create high risks when they are not fully achieved.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>Since quality requirements will have a lot of influence on architectural
decisions you should know for every stakeholder what is really important to them,
concrete and measurable.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-10/">Quality Requirements</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Motivation</dt>
<dd>
<p>"As quality requirements, we aim to meet our quality objectives: usability, maintainability, efficiency, testability, portability."</p>
</dd>
<dt class="hdlist1"><strong>Usability</strong></dt>
<dd>
<p>The application must be easy to use and allow intuitive interaction.
<strong>Priority:</strong> High</p>
</dd>
<dt class="hdlist1"><strong>Maintainability</strong></dt>
<dd>
<p>The application must be easy to modify and extend without breaking functionality.
<strong>Priority:</strong> High</p>
</dd>
<dt class="hdlist1"><strong>Efficiency</strong></dt>
<dd>
<p>The application must perform optimally, minimizing resource and time usage.
<strong>Priority:</strong> Medium</p>
</dd>
<dt class="hdlist1"><strong>Testability</strong></dt>
<dd>
<p>The application must be easy to test to ensure quality and detect errors.
<strong>Priority:</strong> High</p>
</dd>
<dt class="hdlist1"><strong>Portability</strong></dt>
<dd>
<p>The application must run on different platforms for better adaptability.
<strong>Priority:</strong> Medium</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-specific-requirements">11. Specific Requirements</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1">Specific Requirements</dt>
<dd>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p>&#10063; The system must store user registration data.</p>
</li>
<li>
<p>&#10063; The system must correctly validate answers to questions.</p>
</li>
<li>
<p>&#10063; The system must not allow modification of question results once answered.</p>
</li>
<li>
<p>&#10063; The system must inform the user of possible errors through a message.</p>
</li>
<li>
<p>&#10063; The system must notify the user when they have answered a question correctly or incorrectly and when their time has run out.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-technical-risks">12. Risks and Technical Debts</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>A list of identified technical risks or technical debts, ordered by priority</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>“Risk management is project management for grown-ups” (Tim Lister, Atlantic Systems Guild.)</p>
</div>
<div class="paragraph">
<p>This should be your motto for systematic detection and evaluation of risks and technical debts in the architecture, which will be needed by management stakeholders (e.g. project managers, product owners) as part of the overall risk analysis and measurement planning.</p>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>List of risks and/or technical debts, probably including suggested measures to minimize, mitigate or avoid risks or reduce technical debts.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-11/">Risks and Technical Debt</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Risk</strong></th>
<th class="tableblock halign-left valign-top"><strong>Explanation</strong></th>
<th class="tableblock halign-left valign-top"><strong>Measure</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lack of experience with the technologies used</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">We lack extensive experience with technologies like React, Node.js, MongoDB, which might complicate their usage.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Research these technologies and learn how to use them correctly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lack of time</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">There are deadlines for each deliverable, and we may run out of time.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stay consistent and do as much as possible daily.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Teamwork challenges</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Working in a team can be difficult, especially since we&#8217;ve never done a large project like this.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maintain good communication and collaboration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unproductive meetings</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spending too much time in meetings without making progress can cause issues.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Prepare briefly for meetings to focus on specific topics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Member abandonment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If a team member quits, their tasks will need to be reassigned, increasing the workload.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assign tasks to multiple people and offer support to avoid abandonment.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">External service failure</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An external service like Wikidata or Azure may fail temporarily.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stay updated on service changes and work to restore functionality quickly.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 40%;">
<col style="width: 40%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Technical Debt</strong></th>
<th class="tableblock halign-left valign-top"><strong>Explanation</strong></th>
<th class="tableblock halign-left valign-top"><strong>Solution</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insufficient documentation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lack of proper documentation can make future system understanding and maintenance challenging.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensure thorough and clear documentation is created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Suboptimal database design</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A poorly designed database can create scalability issues as the system grows.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plan and design the database carefully before implementation or modification.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dependence on AI-generated code</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AI-generated code may have inaccuracies, potentially leading to difficulties when revisiting or updating it.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Review, adjust, and validate AI-generated code before integration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LLM performance issues</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The language model may cause slow response times and irrelevant answers, impacting user experience.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optimize prompts and continuously monitor the model&#8217;s performance for improvements.</p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="section-glossary">13. Glossary</h2>
<div class="sectionbody">
<div class="sidebarblock arc42help">
<div class="content">
<div class="paragraph">
<div class="title">Contents</div>
<p>The most important domain and technical terms that your stakeholders use when discussing the system.</p>
</div>
<div class="paragraph">
<p>You can also see the glossary as source for translations if you work in multi-language teams.</p>
</div>
<div class="paragraph">
<div class="title">Motivation</div>
<p>You should clearly define your terms, so that all stakeholders</p>
</div>
<div class="ulist">
<ul>
<li>
<p>have an identical understanding of these terms</p>
</li>
<li>
<p>do not use synonyms and homonyms</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Form</div>
<p>A table with columns &lt;Term&gt; and &lt;Definition&gt;.</p>
</div>
<div class="paragraph">
<p>Potentially more columns in case you need translations.</p>
</div>
<div class="paragraph">
<div class="title">Further Information</div>
<p>See <a href="https://docs.arc42.org/section-12/">Glossary</a> in the arc42 documentation.</p>
</div>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>React.js</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>It is a free and open-source front-end JavaScript library that aims to make building user interfaces based on components more "seamless".</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Node.js</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Node.js is a cross-platform, open-source JavaScript runtime environment that can run on Windows, Linux, Unix, macOS, and more. Node.js runs on the V8 JavaScript engine, and executes JavaScript code outside a web browser.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>MongoDB</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>MongoDB is a source-available, cross-platform, document-oriented database program. Classified as a NoSQL database product, MongoDB uses JSON-like documents with optional schemas.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>LLM</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A large language model (LLM) is a type of machine learning model designed for natural language processing tasks such as language generation. LLMs are language models with many parameters, and are trained with self-supervised learning on a vast amount of text.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Microservices</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>A microservice architecture is an architectural pattern that organizes an application into a collection of loosely coupled, fine-grained services that communicate through lightweight protocols. This pattern is characterized by the ability to develop and deploy services independently, improving modularity, scalability, and adaptability.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Docker</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Containers are isolated from one another and bundle their own software, libraries and configuration files; they can communicate with each other through well-defined channels. Because all of the containers share the services of a single operating system kernel, they use fewer resources than virtual machines.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>SSH</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>The Secure Shell Protocol (SSH Protocol) is a cryptographic network protocol for operating network services securely over an unsecured network. Its most notable applications are remote login and command-line execution.</em></p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_about_the_game">13.1. About the game</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Definition</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Hint Chat - WiChat AI</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>The hint chat is referred to the chat where the players can comunicate with the LLM in order to get information about the correct answer</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>WiChat</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>WiChat is the name of the whole project and the application.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Ranking</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>The ranking page is referred to an online leaderboard of who got the most points overall.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Category</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Although is not shown yet, categories are referred to the type of questions the game has. This can be expanded or filtered as needed.</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Time</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Each question has its own time of answering, that could be use in several game modes.</em></p></td>
</tr>
</tbody>
</table>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="section-test-report">14. Test Report</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this project, tests have been carried out for each created service and for every React component.
Since Continuous Integration and Development was chosen, these tests are executed every time something is added to the <code>master</code> branch, whether through commits or pull requests.
Additionally, when a release is made, the acceptance tests are also executed, ensuring compliance with Continuous Integration and Development.</p>
</div>
<div class="sect2">
<h3 id="_unit_tests">14.1. Unit Tests</h3>
<div class="paragraph">
<p>This project consists of 7 services: Gateway, llmService, questionsService, authservice, historyservice, usersService, webapp</p>
</div>
<div class="sect3">
<h4 id="_gateway_test">14.1.1. Gateway Test</h4>
<div class="paragraph">
<p>Tests API Gateway functionality by verifying request routing between services, authentication middleware, and error handling. Includes endpoint validation for /login, /adduser, /stats, /rankings, and /history, plus health checks.</p>
</div>
</div>
<div class="sect3">
<h4 id="_llmservice_test">14.1.2. LlmService Test</h4>
<div class="paragraph">
<p>These tests verify that the service responds as expected when the parameters are correct, as well as when there is an error in the parameters — for example, if a parameter is missing, if a non-existent LLM model is selected, or if the POST request fails.</p>
</div>
</div>
<div class="sect3">
<h4 id="_questionsservice_test">14.1.3. QuestionsService Test</h4>
<div class="paragraph">
<p>Validates WikiData integration for trivia question generation, testing category filtering, multilingual support, and question format. Ensures proper handling of API responses and errors.</p>
</div>
</div>
<div class="sect3">
<h4 id="_authservice_test">14.1.4. Authservice Test</h4>
<div class="paragraph">
<p>Verifies user authentication including JWT tokens, login process, and password encryption. Tests token validation, session management, and security features.</p>
</div>
</div>
<div class="sect3">
<h4 id="_historyservice_test">14.1.5. Historyservice Test</h4>
<div class="paragraph">
<p>Checks game record management by testing storage of results, statistics retrieval, and ranking calculations. Validates data consistency and error handling.</p>
</div>
</div>
<div class="sect3">
<h4 id="_usersservice_test">14.1.6. UsersService Test</h4>
<div class="paragraph">
<p>Tests user management features including registration, username validation, and MongoDB interactions. Verifies user data handling and profile operations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_webapp_test">14.1.7. Webapp Test</h4>
<div class="paragraph">
<p>Validates frontend UI components using React Testing Library. Tests component rendering, user interactions, and state management for login, game interface, and profile views.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_acceptance_tests">14.2. Acceptance Tests</h3>
<div class="paragraph">
<p>Para los test de aceptacion, se ha realizado x test de aceptacion.</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_coverage">14.3. Code Coverage</h3>
<div class="paragraph">
<p>From the unit tests, we can analyze the project&#8217;s code coverage.
For this purpose, SonarQube&#8217;s test coverage feature was used, achieving <strong>85.4% test coverage</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/testCoverage.png" alt="Test coverage">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_load_tests">14.4. Load Tests</h3>
<div class="paragraph">
<p>Artillery was used for load testing. The following endpoints were tested: <code>/login</code>, <code>/adduser</code>, <code>/generateQuestions</code> (start game), <code>/history/{{username}}</code>, <code>/savegame</code>, and <code>/stats/{{username}}</code>.</p>
</div>
<div class="paragraph">
<p>A total of 2280 users were created, and 15,960 HTTP requests were made, with an average rate of 74 responses per second.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/testCarga.png" alt="Load test">
</div>
</div>
<div class="paragraph">
<p>The load tests lasted 4 minutes and were divided into 3 phases: an initial ramp-up (7 U/s to 60 U/s), a medium load phase (100 U/s), and a peak load phase (100 U/s to 185 U/s).
The highest response time recorded was 2.7 seconds, with an average response time of 65 ms.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/httpPerfor.png" alt="HTTP performance">
</div>
</div>
<div class="paragraph">
<p>For the <code>/adduser</code> request, a 200 status code is returned when a user is created for the first time; subsequent attempts return a 400 code.</p>
</div>
<div class="paragraph">
<p>The <code>/generateQuestions</code>, <code>/history/{{username}}</code>, <code>/savegame</code>, and <code>/stats/{{username}}</code> requests all return 200 status codes, as they are called with valid data.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/requestURL.png" alt="URL requests">
</div>
</div>
<div class="paragraph">
<p>For the <code>/login</code> request, about half return 401 status codes due to unregistered users, while the other half return 200 codes with correct credentials.
This endpoint also showed the highest response time when the number of concurrent users was at its peak.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/testCargaLogin.png" alt="/login performance">
</div>
</div>
<div class="paragraph">
<p>All the tests, as well as instructions on how to execute them and how to visualize the graphs in a more dynamic way, can be found in the <code>testCarga</code> directory.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 8.2 EN<br>
Last updated 2025-05-01 13:19:35 +0200
</div>
</div>
</body>
</html>